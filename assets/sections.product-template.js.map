{"version":3,"file":"sections.product-template.js","mappings":"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","sources":["webpack://SkinShark/webpack/runtime/chunk loaded","webpack://SkinShark/./scripts/tools/constants/classes.ts","webpack://SkinShark/./scripts/tools/product/variant.ts","webpack://SkinShark/./scripts/objects/product/variant-selector.ts","webpack://SkinShark/./scripts/objects/product/product-swatches.ts","webpack://SkinShark/./scripts/tools/constants/attributes.ts","webpack://SkinShark/./scripts/tools/utilities/helper-functions.ts","webpack://SkinShark/./scripts/objects/accordion.ts","webpack://SkinShark/./scripts/objects/bundle/bundle-common.ts","webpack://SkinShark/./scripts/sections/product-template.ts","webpack://SkinShark/external var \"jQuery\"","webpack://SkinShark/webpack/bootstrap","webpack://SkinShark/webpack/runtime/define property getters","webpack://SkinShark/webpack/runtime/global","webpack://SkinShark/webpack/runtime/hasOwnProperty shorthand","webpack://SkinShark/webpack/runtime/runtimeId","webpack://SkinShark/webpack/runtime/jsonp chunk loading","webpack://SkinShark/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","export const CLASS_ACTIVE = 'is-active';\nexport const CLASS_OPEN = 'is-open';\nexport const CLASS_HIDDEN = 'is-hidden';\nexport const CLASS_VISIBLE = 'is-visible';\nexport const CLASS_FADE_IN = 'is-fade-in';\nexport const CLASS_FADE_OUT = 'is-fade-out';\nexport const CLASS_STICKY = 'is-sticky';\nexport const CLASS_FIXED = 'is-fixed';\nexport const CLASS_STUCK = 'is-stuck';\nexport const CLASS_UNAVAILABLE = 'is-unavailable';\nexport const CLASS_SELECTED = 'is-selected';\nexport const CLASS_DISABLED = 'is-disabled';\nexport const CLASS_SCROLL_DISABLED = 'is-scroll-disabled';\nexport const CLASS_HAS_ERROR = 'has-error';\nexport const CLASS_MENU_TOGGLE = 'is-menu-open';\nexport const CLASS_INITIALISED = 'is-initialised';\nexport const CLASS_SOLD_OUT = 'is-sold-out';","import { productGetUrl, WithProduct } from \"./product\";\nimport { handlize } from '@process-creative/slate-theme-tools';\n\nexport type Variant = {\n  available:boolean;\n  barcode:string;\n  compare_at_price:number|null;\n  featured_image:string|null;\n  featured_media:{ id:string };\n  id:VariantId;\n  inventory_management:'shopify'|null;\n  inventory_policy:'continue'|'deny'|null;\n  name:string;\n  variantIndex?: number\n\n  /** @deprecated */\n  option1:string;\n  /** @deprecated */\n  option2:string|null;\n  /** @deprecated */\n  option3:string|null;\n\n  options:string[];\n  price:number;\n\n  /** @deprecated */\n  public_title:string;\n\n  requires_shipping:boolean;\n  sku:string|null;\n  taxable:boolean;\n  title:string;\n  weight:number;\n  inventory_quantity:number|null;\n}\n\nexport type VariantId = number;\n\nexport type WithVariant = { variant:Variant; };\nexport type WithVariants = { variants:Variant[] };\nexport type WithVariantId = { variantId:number; };\nexport type WithOptions = { options:string[] };\n\nexport const variantFirstAvailable = ({ variants }:WithVariants) => {\n  return variants.find(v => v.available);\n}\n\nexport const variantFirstAvailableOrDefault = (p:WithVariants) => {\n  return variantFirstAvailable(p) || p.variants[0];\n}\n\nexport const variantGetFromOptions = (params:WithOptions & WithProduct) => (\n  params.product.variants.find(variant => (\n    variantDoesHaveOption({ ...params, variant })\n  ))\n);\n\nexport const variantDoesHaveOption = (params:WithVariant & WithOptions) => (\n  params.options.every((val,pos) => handlize(params.variant.options[pos]) === handlize(val))\n);\n\nexport const variantGetUrl = (params:WithVariant & WithProduct) => (\n  `${productGetUrl(params)}?variant=${params.variant.id}`\n);","/*\n *  Variant Selector\n *    Scripts for the variant selector\n *\n *  Version:\n *    1.0.0 - 2020/11/22\n */\n\nimport { Product, WithProduct } from './../../tools/product/product';\nimport { Variant, WithVariant, WithVariantId } from './../../tools/product/variant';\n\n// Selectors\nconst SELECTOR_VARIANT_SELECTOR = '[data-variant-selector]';\n\n// Attributes\nconst ATTR_PRODUCT_DATA = 'data-product';\n\n// Events\nconst EVENT_VARIANT = 'variant';\n\n// Types\ntype VariantSelectorInput = (HTMLInputElement | HTMLSelectElement);\n\nexport type VariantSelector = {\n  product:Product;\n  variant:Variant;\n  selector:VariantSelectorInput;\n}\n\nexport type WithVariantSelectorInput = { selector:VariantSelectorInput };\nexport type WithVariantSelector = { variantSelector:VariantSelector };\nexport type WithVariantWatch = {\n  variantChange:(params:WithVariantSelector & WithVariant & WithProduct) => void\n};\n\ntype VariantEvent = CustomEvent<\n  WithVariantSelector & WithVariant & WithVariantId & WithProduct\n>;\n\nexport const variantSelectorFind = ({ container }:{ container:HTMLElement }) => {\n  const input = container.querySelectorAll<VariantSelectorInput>(SELECTOR_VARIANT_SELECTOR);\n  if(!input) return null;\n  return variantSelectorCreate({ selector: input[0] });\n}\n\ntype CreateParams = WithVariantSelectorInput;\nconst variantSelectorCreate = (params:CreateParams) => {\n  // Load the product data\n  const productString = params.selector.getAttribute(ATTR_PRODUCT_DATA);\n  if(!productString) return null;\n  const product = JSON.parse(productString) as Product;\n\n  // Get the currently selected variant and setup the VS\n  const value = params.selector.value;\n  const variant = product.variants.find(v => `${v.id}` == value);\n  if(!variant) return null;\n  const variantSelector:VariantSelector = { ...params, product, variant };\n\n  // Setup event listener\n  const onVariantChange = (e:Event) => {\n    const variantId = parseInt(params.selector.value);\n    const variant = variantSelectorSetVariant({ variantSelector, variantId, product });\n    if(variant) return; // Valid variant\n    e.preventDefault(); // Invalid variant\n  }\n  params.selector.addEventListener('change', onVariantChange);\n\n  return variantSelector;\n}\n\ntype SetVariantParams = WithVariantSelector & WithVariantId & WithProduct;\nexport const variantSelectorSetVariant = (params:SetVariantParams) => {\n  const { variantSelector, variantId, product } = params;\n\n  // Find the variant\n  const variant = variantSelector.product.variants.find(v => (\n    v.id === variantId\n  ));\n  if(!variant) return null;\n\n  // Update the VS (if necessary)\n  variantSelector.variant = variant;\n  if(variantSelector.selector.value != `${variant.id}`) {\n    variantSelector.selector.value = `${variant.id}`;\n  }\n\n  // Trigger custom event for watchers\n  variantSelector.selector.dispatchEvent(new CustomEvent(EVENT_VARIANT, {\n    detail: { variantSelector, variant, variantId, product }\n  }));\n  return variant;\n};\n\nexport const onVariantSelected = (func: (variantId?: string) => void) => {\n  const variantSelectorElem: HTMLSelectElement = document.querySelector(SELECTOR_VARIANT_SELECTOR)!\n  variantSelectorElem.addEventListener('change', _ => {\n    const variantId = variantSelectorElem.value\n    func(variantId)\n  })\n}\n\ntype WatchParams = WithVariantSelector & WithVariantWatch;\nexport const variantSelectorWatch = (params:WatchParams) => {\n  // Create event callback\n  const event = (e:Event) => {\n    const evt = e as VariantEvent;\n    return params.variantChange({ ...evt.detail })\n  };\n\n  // Add listener\n  params.variantSelector.selector.addEventListener(EVENT_VARIANT, event);\n\n  // Return event remover\n  return () => {\n    params.variantSelector.selector.removeEventListener(EVENT_VARIANT, event);\n  };\n}\n\nexport function getVariant(): Variant{\n  const productObj: Product = JSON.parse(document.querySelector(SELECTOR_VARIANT_SELECTOR)!.getAttribute('data-product')!)\n  const variantId = document.querySelector<HTMLSelectElement>(SELECTOR_VARIANT_SELECTOR)!.value\n  return productObj.variants.find(v => v.id == Number(variantId))!\n}","/*\n *  Product Swatches\n *    Scripts for the product swatches\n *\n *  Version:\n *    1.0.0 - 2020/11/22\n */\n\nimport { CLASS_SELECTED, CLASS_SOLD_OUT } from './../../tools/constants/classes';\nimport { Product, WithProduct } from '../../tools/product/product';\nimport { handlize } from '@process-creative/slate-theme-tools';\nimport {\n  Variant, variantFirstAvailableOrDefault, variantGetFromOptions, WithVariant\n} from '../../tools/product/variant';\nimport {\n  VariantSelector, variantSelectorFind, variantSelectorSetVariant,\n  variantSelectorWatch, WithVariantSelector\n} from \"../../objects/product/variant-selector\";\n\n// Types\ntype WithSwatchContainer = { swatchContainer:HTMLElement; };\ntype WithSwatches = { swatches:ProductSwatches };\n\nexport type ProductSwatches = {\n  swatchContainer:HTMLElement;\n  variantSelector:VariantSelector;\n  variantWatcher:ReturnType<typeof variantSelectorWatch>;\n  options:string[];\n  groups:HTMLDivElement[];\n  objects:HTMLButtonElement[];\n  selects:HTMLSelectElement[];\n};\n\n// Selectors\nconst SELECTOR_SWATCH_GROUP = '[data-swatch-group]';\nconst SELECTOR_SWATCH_OBJ = '[data-swatch-object]';\nconst SELECTOR_SWATCH_SELECT = '[data-swatch-selector]';\n\n// Attributes\nconst ATTR_POSITION = 'data-swatch-position';\nconst ATTR_VALUE = 'data-value';\n\nconst STRING_SOLD_OUT = ' - (sold out)';\n\n// Methods\ntype FindParams = { container:HTMLElement };\nexport const swatchesFind = (params:FindParams) => {\n  // Find the variant selector\n  const variantSelector = variantSelectorFind(params);\n  if(!variantSelector) return null;\n\n  const swatches = swatchesCreate({\n    swatchContainer: params.container, variantSelector\n  });\n\n  return swatches;\n}\n\ntype CreateParams = WithSwatchContainer & WithVariantSelector;\nconst swatchesCreate = (params:CreateParams) => {\n  const { swatchContainer, variantSelector } = params;\n\n  const swatches = {\n    ...params, options: [], groups: [], objects: [], selects: [],\n    variantWatcher: variantSelectorWatch({\n      ...params,\n      variantChange: changeParams => {\n        // On variant change, refresh swatches\n        swatchesSetFromVariant({ swatches, ...changeParams })\n      }\n    })\n  } as ProductSwatches;\n\n  // Swatch groups\n  const groups = swatchContainer.querySelectorAll<HTMLDivElement>(SELECTOR_SWATCH_GROUP);\n  \n  groups.forEach(group => {\n    const objects = group.querySelectorAll<HTMLButtonElement>(SELECTOR_SWATCH_OBJ);\n    const select = group.querySelector<HTMLSelectElement>(SELECTOR_SWATCH_SELECT);\n    const positionOne = parseInt(group.getAttribute(ATTR_POSITION) || '');\n\n    if(isNaN(positionOne)) return;\n    const position = positionOne - 1;\n\n    swatches.groups.push(group);\n\n    // Button style\n    objects.forEach(obj => {\n      const value = obj.getAttribute(ATTR_VALUE);\n      if(!value) return;\n      swatches.objects.push(obj);\n\n      obj.addEventListener('click', e => {\n        e.preventDefault();\n        swatchSetOptionValue({ swatches, position, value });\n      });\n    });\n\n    // Select style\n    if(select) {\n      swatches.selects.push(select);\n      select.addEventListener('change', e => {\n        swatchSetOptionValue({ swatches, position, value: select.value });\n      });\n    }\n  });\n\n  // Update from current variant\n  swatchesSetFromVariant({ swatches, ...variantSelector });\n\n  return swatches;\n}\n\ntype SetOptionValueParams = WithSwatches & { value:string; position:number };\n\nexport const swatchSetOptionValue = (params:SetOptionValueParams) => {\n  const { swatches, value, position } = params;\n  const { variantSelector } = swatches;\n  const { product } = variantSelector;\n\n  // How this works is that we are going to iterate over each of the options and\n  // find a match where we can\n  let selectedOptions:string[] = [];\n  let matchFound = true;\n  for(let i = 0; i < product.options.length; i++) {\n    // Determine the value we're going to set\n    let indexValue = i === position ? value : swatches.options[i];\n    let selectedTemp = [ ...selectedOptions, indexValue ];\n\n    // Determine if there's a match\n    const match: Variant | undefined = variantGetFromOptions({ options:selectedTemp, product });\n    if(match) {\n      selectedOptions = selectedTemp;\n      continue;\n    }\n\n    // Find first match for this index\n    let firstMatchVariant = variantGetFromOptions({\n      options: selectedOptions, product\n    });\n\n    if(firstMatchVariant) {\n      selectedOptions = firstMatchVariant.options;\n      break;\n    }\n\n    matchFound = false;\n    break;\n  }\n\n  // Did we find a match?\n  let variant:Variant;\n  if(!matchFound) {\n    console.error(`Failed to find a matching variant for swatch event`);\n    variant = variantFirstAvailableOrDefault(product);\n  } else {\n    variant = (\n      variantGetFromOptions({ options: selectedOptions, product }) ||\n      variantFirstAvailableOrDefault(product)\n    );\n  }\n\n  // Did we even do anything?\n  if(variant.id === variantSelector.variant.id) return variant;\n\n  return variantSelectorSetVariant({\n    variantSelector, variantId: variant.id, product\n  });\n}\n\ntype SetFromVariantParams = WithSwatches & WithVariant & WithProduct;\nexport const swatchesSetFromVariant = (params:SetFromVariantParams) => {\n  const { swatches, variant, product } = params;\n\n  // Update the swatch options\n  swatches.options = [ ...variant.options ];\n\n  swatches.groups.forEach(group => {\n    const objects = group.querySelectorAll<HTMLButtonElement>(SELECTOR_SWATCH_OBJ);\n    const select = group.querySelector<HTMLSelectElement>(SELECTOR_SWATCH_SELECT);\n    const positionOne = parseInt(group.getAttribute(ATTR_POSITION) || '');\n    if(isNaN(positionOne)) return;\n\n    const position = positionOne - 1;\n    let selectedValue = handlize(swatches.options[position]);\n\n    // Button style\n    objects.forEach(obj => {\n      const value = obj.getAttribute(ATTR_VALUE);\n      if(value === selectedValue) {\n        obj.classList.add(CLASS_SELECTED);\n      } else {\n        obj.classList.remove(CLASS_SELECTED);\n      }\n    });\n\n    // Select style\n    if(select && select.value != selectedValue) {\n      select.value = selectedValue;\n    }\n  });\n\n  updateAvailableSwatches(variant, swatches, product);\n}\n\nconst updateAvailableSwatches = (variant:Variant, swatches:ProductSwatches, product:Product) => {\n  //Variant = the currently available variant\n  swatches.groups.forEach(group => {\n    const positionOne = parseInt(group.getAttribute(ATTR_POSITION) || '');\n    if(positionOne == 1) return;\n\n    const objects = group.querySelectorAll<HTMLButtonElement>(SELECTOR_SWATCH_OBJ);\n    const optionElements = group.querySelectorAll<HTMLOptionElement>(`${SELECTOR_SWATCH_SELECT} option`);\n    //Make all sold out initially\n    objects.forEach(swatchObject => swatchObject.classList.add(CLASS_SOLD_OUT));\n    //Make all select options disabled out initially\n    optionElements.forEach(optionElem => optionElem.setAttribute('disabled','disabled'))\n\n    //Swatch select boxes\n    const select = group.querySelector<HTMLSelectElement>(SELECTOR_SWATCH_SELECT);\n    select?.querySelectorAll<HTMLOptionElement>('option').forEach(option => {\n      const text = option.text;\n      if(text && !text.includes(STRING_SOLD_OUT)) option.text = text + STRING_SOLD_OUT; \n    });\n  });\n  \n  //Now go over reach option to determine visible swatches\n  for(let i = 1; i < product.options.length; i++) {\n    //Given the selected previous level, what options for *this* level are available?\n    let prevOption = variant.options[i-1];\n\n    let allowedOptionsForThisLevel: string[] = [];\n    product.variants.forEach(v => {\n      let n = v.options[i];\n\n      //If current iterated variant has the same previous option AND is not already in the list of allowed values...\n      if(allowedOptionsForThisLevel.indexOf(n) === -1 && v.options[i-1] == prevOption){\n        allowedOptionsForThisLevel.push(n);//Add to list.\n      }\n    });\n\n    allowedOptionsForThisLevel.forEach(ao => {\n      let aos = `[data-swatch-position=\"${i+1}\"]`;\n      swatches.swatchContainer.querySelector(SELECTOR_SWATCH_OBJ+aos+`[data-value=\"${handlize(ao)}\"]`)?.classList.remove('is-hidden');\n      //Comment this out if you want to disable sold out select swatches\n\n      // this isnt perfect because the swatch functions above is allowing you to select a swatch that doesnt return a variant\n      const optionElem = swatches.swatchContainer.querySelector(SELECTOR_SWATCH_SELECT+aos+` [value=\"${handlize(ao)}\"]`)\n      optionElem?.removeAttribute('disabled');\n    });\n  }\n\n  for(let i = 0; i <= product.options.length; i++) {\n    let avail:any = {};//Stores availability of option[i]'s value.\n\n    //Find if there are any variants for this option with stock available\n    product.variants.forEach((v:Variant) => {\n      //Check previous options match, since we don't want to check stock of\n      //other levels\n      let canUse = true;\n      for(let y = 0; y < i; y++) {\n        if(v.options[y] == variant.options[y]) continue;\n        canUse = false;\n        break;\n      }\n      if(!canUse) return;\n\n      const n = v.options[i];\n      avail[n] = avail[n] || v.available;\n    });\n\n    //Now remove these as sold out.\n    let keys = Object.entries(avail).forEach(e => {\n      let [ key, value] = e;\n      if(!value) return;\n      swatches.swatchContainer.querySelector(`${SELECTOR_SWATCH_OBJ}[${ATTR_POSITION}=\"${i+1}\"][data-value=\"${handlize(key)}\"]`)?.classList.remove(CLASS_SOLD_OUT);\n\n      const optionElement = swatches.swatchContainer.querySelector<HTMLOptionElement>(`${SELECTOR_SWATCH_SELECT}[${ATTR_POSITION}=\"${i+1}\"] [value=\"${handlize(key)}\"]`);\n      if(optionElement) optionElement.text = optionElement.text.replace(STRING_SOLD_OUT, '');\n    });\n  }\n\n}","export const ATTR_DISABLED = 'disabled';","\n\nexport function onReady(action?: () => void): Promise<void> | undefined{\n  let resolvePromise: () => void;\n  document.addEventListener(\"DOMContentLoaded\", (e: any) => {\n    if(action) action(); else resolvePromise()\n  })\n  if(!action) return new Promise<void>(resolve => resolvePromise = resolve)\n}\n\ntype SortVal = string | number\ntype DeepProperties = string | string[]\ntype AscendingDescending = 'ascending' | 'descending'\n\n/**\n * \n * @param {any[]} array \n * @param ascendingDescending \n * @param deepProperties \n * @returns {T} Return sorted array\n * @example sort([{x: 2}, {x: 1}, {x: 3}], 'descending', 'x')\n * output: [{x:3},{x:2},{x:1}]\n * \n */\nexport const sort = <\n  T extends any[], \n  T2 extends DeepProperties\n>(\n  array: T,\n  ascendingDescending: AscendingDescending = 'ascending',\n  deepProperties?: T2\n): T => {  \n  return array.sort((a, b) => (\n    (getSortVal(a) < getSortVal(b) ? 1 : -1) *\n    (ascendingDescending == 'descending' ? -1 : 1)\n  ))\n  \n  function getSortVal(rootObj: any): SortVal{\n    return (\n      !deepProperties ? rootObj : \n      typeof deepProperties == 'string' ? rootObj[deepProperties] : \n      deepProperties.reduce((deepProp, prop) => deepProp[prop], rootObj)\n    )\n  }\n}\n\nexport function toDecimalPlaces(number: number, decimalPlaces: number): number{\n  return Math.round(number * Math.pow(10,decimalPlaces)) / Math.pow(10,decimalPlaces)\n}\n\n\nconst existingTimeOuts: {[key: string]: {timeout: any, reject: any}} = {}\nexport function debounce(milliseconds: number, name: string): Promise<void>{\n\n  if(existingTimeOuts[name]){\n    clearTimeout(existingTimeOuts[name].timeout)\n    existingTimeOuts[name].reject()\n    delete existingTimeOuts[name]\n  }\n\n  return new Promise((resolve, reject) => {\n    existingTimeOuts[name] = {\n      timeout: setTimeout(resolve, milliseconds),\n      reject\n    }\n  })\n\n}\n\n\nexport function getElem<T extends HTMLElement>(selector: string, container?: HTMLElement, handleError?: 'throw on fail'): T{\n  const elem: T = (container || document).querySelector(selector)!;\n  if(!elem && handleError == 'throw on fail'){\n    throwSelectorError(selector)\n  }\n  return elem\n}\n\nexport function getElems<T extends HTMLElement>(selector: string, container?: HTMLElement, handleError?: 'throw on fail'): T[]{\n  const elems: T[] = Array.from((container || document).querySelectorAll(selector));\n  if(!elems.length && handleError == 'throw on fail'){\n    throwSelectorError(selector)\n  }\n  return elems\n}\n\n\nexport function throwSelectorError(selector: string){\n  throw `Could not find element with selector ${selector}`\n}\n\n\nexport function waitForNextFrame(){\n  return new Promise(resolve => requestAnimationFrame(resolve));\n}\n\nexport function onScroll(action: () => void){\n  let previousScrollAmount: number;\n  doActionThenWaitForNextFrame();\n\n  function doActionThenWaitForNextFrame() {\n    const currentScrollAmount = window.scrollY;\n\n    if (currentScrollAmount !== previousScrollAmount) {\n      action();\n      previousScrollAmount = currentScrollAmount;\n    }\n    // on next animation frame, trigger same function\n    requestAnimationFrame(doActionThenWaitForNextFrame);\n  }\n}\n\nexport function elemIsInView(elem: HTMLElement): boolean {\n  // top and bottom values are relative to window view\n  const { top, bottom } = elem.getBoundingClientRect();\n  const elemOutOfView = top > window.innerHeight || bottom < 0;\n  return elemOutOfView ? false : true;\n}\n\n// on resize\nconst actions: (() => void)[] = [];\nexport function onResize(action: () => void) {\n  actions.push(action);\n}\nwindow.addEventListener('resize', (_) => actions.forEach((action) => action()));\n\nexport function loop(number: number, action: (i?: number) => void) {\n  for (let i = 0; i < number; i++) {\n    action(i);\n  }\n}\n\nexport const randomNumber = ({ digits }: { digits: number }): number => {\n  const num = Math.pow(10, digits - 1);\n  return Math.round(Math.random() * num);\n};\n\nexport const timer = ({ seconds }: { seconds: number }) =>\n  new Promise((resolve) => setTimeout(resolve, seconds * 1000));\n","\nimport { getElem, getElems } from \"../tools/utilities/helper-functions\";\nconst SELECTOR_SLIDE = '[data-accordion-slide]';\nconst SELECTOR_TITLE = '[data-accordion-title]';\nconst EXPANDED_CLASS = 'is-expanded';\n\nexport const initAccordion = (container: HTMLElement) => {\n\n  let slides = getElems(SELECTOR_SLIDE, container);\n\n  onSlideClick((clickedSlide: Element) => {\n    if(slideAlreadyOpened(clickedSlide)){\n      expandSlide(clickedSlide, false)\n    } else {\n      expandSlide(clickedSlide)\n      closeOtherSlides(clickedSlide)\n    }\n  })\n\n\n  // Implementation\n\n  function onSlideClick(action: (slide: Element) => void){\n    slides.forEach(slide => {\n      getElem(SELECTOR_TITLE, slide)!.addEventListener('click', (e: MouseEvent) => {\n        let currentSlide = (e.target as HTMLElement).closest(SELECTOR_SLIDE)!;\n        action(currentSlide)\n      })\n    })\n  }\n  \n  function expandSlide(slide: Element, expand = true){\n    const {classList} = slide\n    expand ? classList.add(EXPANDED_CLASS) : classList.remove(EXPANDED_CLASS)\n  }\n\n  function closeOtherSlides(clickedSlide: Element){\n    slides.forEach(slide => \n      slide !== clickedSlide && expandSlide(slide, false)\n    )\n  }\n\n  function slideAlreadyOpened(clickedSlide: Element): boolean{\n    return clickedSlide.classList.contains(EXPANDED_CLASS)\n  }\n\n\n}\n\n","import { getCurrentCart, ON_CART_FINISHED, t, cartAdd, CartAdd, formatMoney, getFormat, printMoney, changeCart } from \"@process-creative/slate-theme-tools\";\nimport { Cart } from \"../../tools/cart/cart\";\nimport { ATTR_DISABLED } from \"../../tools/constants/attributes\";\nimport { CLASS_DISABLED } from \"../../tools/constants/classes\";\nimport { Product } from \"../../tools/product/product\";\nimport { Variant } from \"../../tools/product/variant\";\nimport { productFetch, variantFetch } from \"../../tools/utilities/fetch-data\";\nimport { randomNumber } from \"../../tools/utilities/helper-functions\";\nimport { ValidationState } from \"../../types/types\";\n\n\n\n\nexport type BundleParentProperties = {\n  isProductBundle: string\n  _bundleName: string //for marking child items with associated bundle\n  _percentageDiscount: string\n  _childTitles: string\n}\nexport type BundleChildProperties = {\n  isChildVariant: string\n  _uniqueChildId: string\n}\n\nexport type Bundle = {\n  bundleProduct: Product\n  childVariants: Variant[]\n  percentageDiscount?: number\n}\n\n\n\nexport type ChildVariant = {\n  product: Product\n  variant: Variant\n}\n\n\n\n\nfunction disableButton(addToCartButton: HTMLElement){\n  addToCartButton.classList.add(CLASS_DISABLED);\n  addToCartButton.setAttribute(ATTR_DISABLED, ATTR_DISABLED);\n}\nfunction enableButton(addToCartButton: HTMLElement){\n  addToCartButton.classList.remove(CLASS_DISABLED);\n  addToCartButton.removeAttribute(ATTR_DISABLED);\n}\n\n\n\n\nexport function onAddClicked(addToCartButton: HTMLElement, action: any){\n  addToCartButton.addEventListener('click', e => {\n    e.preventDefault();\n    action();\n  })\n}\n\nexport function onCartUpdated(action: any){\n  $(document).on(ON_CART_FINISHED, action);\n}\n\n\nexport async function addBundleToCart(\n  data: {\n    bundle: Bundle,\n    bundleQuantity?: number\n    addToCartButton?: HTMLElement\n  }\n){\n  let {bundle, bundleQuantity, addToCartButton} = data;\n\n  bundleQuantity = bundleQuantity || 1;\n\n  const {percentageDiscount, childVariants, bundleProduct} = bundle;\n\n  if(addToCartButton){\n    disableButton(addToCartButton)  ;\n    addToCartButton.innerHTML = t('products.product.cart_pending');\n  }\n  \n  const items = setBundleProperties();\n  await cartAdd({items});\n\n  if(addToCartButton){\n    const dispalyMessageDuration = 2000;\n    await new Promise(resolve => setTimeout(resolve, dispalyMessageDuration));\n  }\n\n\n  \n  function setBundleProperties(): CartAdd[]{\n    const bundleProductVariantId = bundleProduct.variants[0].id;\n    const bundleId = bundleProductVariantId + '-' + randomNumber({digits: 6});\n    \n    const childTitles = childVariants\n    .reduce((variantGroups, variant) => {\n\n      const existingVariant = variantGroups.find(g => g.variant.id == variant.id);\n\n      if(existingVariant){\n        existingVariant.quantity ++;\n      }\n      else{\n        variantGroups.push({variant, quantity: 1});\n      }\n      return variantGroups;\n\n    }, [] as {variant: Variant, quantity: number}[])\n    .map(group => `${group.variant.name} ${group.quantity > 1 ? ` X ${group.quantity}` : ''}`)\n    .join('|');\n\n    \n    const bundleProductItem = {\n      id: Number(bundleProductVariantId),\n      quantity: bundleQuantity!,\n      properties: <BundleParentProperties>{\n        isProductBundle: bundleId,\n        _bundleName: bundleProduct.title,\n        _percentageDiscount: percentageDiscount!.toString(),\n        _childTitles: childTitles\n      }\n    }\n    \n    const childVariantItems = childVariants.map((variant): CartAdd => {\n      return {\n        id: variant.id,\n        quantity: bundleQuantity!,\n        properties: <BundleChildProperties>{\n          isChildVariant: bundleId,\n          _uniqueChildId: randomNumber({digits: 6}).toString()\n        }\n      }\n    })\n    const addArray: CartAdd[] = [bundleProductItem, ...childVariantItems];\n    return addArray;\n  }\n\n}\n\n\nexport function updateButton(\n  addToCartButton: HTMLElement, \n  validationState: ValidationState,\n  bundle: Bundle,\n  baseClass: string,\n  quantity?: number\n){\n  switch(validationState){\n    case 'ok':\n      setValidButton(); break;\n    case 'error': setDisabled(); break;\n    case 'all in cart': \n    case 'not enough inventory': \n    case 'unavailable': \n      setSoldOutButton();\n  }\n  \n\n  function setValidButton(){\n    const {priceMoney, compareMoney} = getBundlePrice(bundle, quantity);\n\n    const priceElem = getPriceElem(priceMoney, compareMoney);\n      \n    addToCartButton.innerHTML = `\n      ${t('products.product.add')}\n      <span class='is-divider'>|</span>\n      ${priceElem}\n    `;\n    enableButton(addToCartButton);\n\n    function getPriceElem(priceMoney: string, compareMoney: string){\n      return `\n        <p\n          class=\"o-product-pricing ${baseClass}__add-cart-price\n          ${compareMoney ? 'has-compare' : ''}\"\n          data-product-pricing\n        >\n          ${compareMoney ? `\n            <span.\n              class=\"\n                o-product-pricing__money \n                o-product-pricing__compare \n                ${baseClass}__add-cart-price-money ${baseClass}__add-cart-price-compare\n              \"\n              data-currency\n              data-money=\"${compareMoney}\"\n              data-product-compare-money\n            >\n              ${compareMoney}\n            </span.>` : ''\n          }\n        \n          <span\n            class=\"o-product-pricing__money o-product-pricing__price\n            ${compareMoney ? 'has-compare' : ''}\"\n            data-currency\n            data-money=\"${priceMoney}\"\n            data-product-money\n          >\n            ${priceMoney}\n          </span>\n        </p>\n      `;\n    }\n\n  }\n\n  function setSoldOutButton(){\n    disableButton(addToCartButton);\n    addToCartButton.innerHTML = t('products.product.sold_out');\n  }\n\n\n  function setDisabled(){\n    disableButton(addToCartButton);\n    addToCartButton.innerHTML = t('products.product.disabled');\n  }\n\n  \n\n}\n\nexport function validateVariantAvailability(variant: Variant, quantity = 1, groupQty = 1): ValidationState{\n\n  const cartItems = (getCurrentCart() as Cart).items;\n  const {available, inventory_quantity, id, inventory_policy, inventory_management} = variant;\n  \n  const trackQuantityChecked = inventory_management == 'shopify';\n  const continueSellingWhenOutOfStockChecked = inventory_policy == 'continue';\n\n  if(trackQuantityChecked == false || continueSellingWhenOutOfStockChecked){\n    return 'ok';\n  }\n\n  if(available == false || !inventory_quantity){\n    return 'unavailable';\n  }\n\n  const variantInCartCount = cartItems.reduce((qty, item) => {\n    if(item.variant_id == id){\n      qty += item.quantity;\n    }\n    return qty;\n  }, 0);\n\n  const remainingInventory = inventory_quantity - variantInCartCount;\n\n  if(quantity > 0 && variantInCartCount > 0 && remainingInventory <= 0){\n    return 'all in cart';\n  }\n  if(remainingInventory - (groupQty * quantity) < 0){\n    return 'not enough inventory';\n  }\n  return 'ok';\n}\n\n\n\nexport function validateBundleAvailability(bundle: Bundle, bundleQuantity = 1): ValidationState{\n\n  const groupedVariants = groupChildVariants();\n\n  for(let group of groupedVariants) {\n    const validationState = validateVariantAvailability(group.childVariant, bundleQuantity * group.qty);\n    if(validationState != 'ok'){\n      return validationState;\n    }\n  }\n  \n  return 'ok';\n\n  /* implementation */\n  \n  \n  function groupChildVariants(): {childVariant: Variant, qty: number}[]{\n\n    return bundle.childVariants.reduce((groupedVariants, childVariant) => {\n\n      const existingGroup = groupedVariants.find(g =>\n        g.childVariant.id == childVariant.id\n      );  \n      if(existingGroup)existingGroup.qty++;\n      else  groupedVariants.push({childVariant, qty: 1});\n      return groupedVariants;\n    }, [] as {childVariant: Variant,  qty: number}[]);\n\n  }\n\n\n}\n\n\nexport function getBundlePrice({childVariants, percentageDiscount, bundleProduct}: Bundle, qty = 1): {priceMoney: string, compareMoney: string}{\n\n  const bundleFixedPrice = bundleProduct.variants[0].price * qty\n\n  const totalVariantPrice = childVariants.reduce((totalPrice, variant) => {\n    return totalPrice += variant.price * qty;\n  }, 0)\n\n\n  if(bundleFixedPrice > 0){\n    if(bundleFixedPrice > totalVariantPrice){\n      throw \"Bundle price should not cost more that total of variants\"\n    }\n  \n    return {\n      priceMoney: printMoney(bundleFixedPrice),\n      compareMoney: totalVariantPrice > bundleFixedPrice ? printMoney(totalVariantPrice) : null\n    };\n  \n\n  } else {\n    const priceMoney = formatMoney(\n      !Number(percentageDiscount) ? \n      totalVariantPrice : getPriceAfterDiscount() ,\n        getFormat('', 'money_format')\n    );\n    \n    const compareMoney = !Number(percentageDiscount) ? \n      null : formatMoney(totalVariantPrice, getFormat('', 'money_format'));\n  \n    return {\n      priceMoney,\n      compareMoney\n    };\n  \n\n  }\n\n\n  // implementation\n\n\n  function getPriceAfterDiscount(): number{\n    const discountAmount = totalVariantPrice * percentageDiscount!/100;\n    return totalVariantPrice - discountAmount;\n  }\n\n  \n}\n\nexport async function removeBundleFromCart(bundleId: string){\n\n  const cartItems = (getCurrentCart() as Cart)?.items;\n  const bundleProduct = cartItems.find(i => i.properties?.isProductBundle == bundleId);\n  const childItems = cartItems.filter(i => i.properties?.isChildVariant == bundleId);\n  if(!bundleProduct || !childItems) return\n  changeCart([\n    {key: bundleProduct.key.toString(), quantity: 0},\n    ...childItems.map(item => ({key: item.key.toString(), quantity: 0}))\n  ]);\n}\n\n\nexport async function changeBundleQuantity(bundleId: string, quantity: number): Promise<ValidationState>{\n  const cartItems = (getCurrentCart() as Cart).items;\n  \n  const bundleProductItem = cartItems.find(item => item.properties?.isProductBundle == bundleId)!;\n  const bundleChildItems = cartItems.filter(item => item.properties?.isChildVariant == bundleId);\n\n  const bundleProduct = await productFetch(bundleProductItem.handle);\n  const childVariantObjs = bundleProduct.metafields.childVariants;\n  const childVariants = await fetchBundleVariantsFromShopify();\n\n  const bundle: Bundle = {\n    bundleProduct,\n    childVariants,\n    percentageDiscount: Number(bundleProduct.metafields.percentageDiscount)\n  }\n\n\n  const quantityAdded = quantity - bundleProductItem.quantity;\n  const validationState = validateBundleAvailability(bundle, quantityAdded);\n\n  if(validationState == 'ok'){\n    await updateCartQuantity();\n  }\n\n  return validationState;\n\n  //implementation\n\n\n  async function fetchBundleVariantsFromShopify(): Promise<Variant[]>{\n    const variants: Variant[] = await Promise.all(\n      childVariantObjs!.map(varObj => {\n        const varObjSplit = varObj.split(':')\n        const productHandle = varObjSplit[0]\n        const variantId = Number(varObjSplit[1])\n        return variantFetch(productHandle, variantId)\n      })\n    );\n\n    return variants;\n\n  }\n\n\n\n\n  function updateCartQuantity(){\n    return changeCart([\n      {key: bundleProductItem.key.toString(), quantity},\n      ...bundleChildItems.map(item => ({key: item.key.toString(), quantity}))\n    ]);\n  }\n\n}\n","//Find Variant Selector\nimport { ProductSwatches, swatchesFind } from \"../objects/product/product-swatches\";\nimport { variantSelectorWatch } from \"../objects/product/variant-selector\";\nimport { ATTR_DISABLED } from \"../tools/constants/attributes\";\nimport { CLASS_DISABLED } from \"../tools/constants/classes\";\nimport { setQueryParams, t, addToCart, getCurrentCart, printMoney, ON_CART_FINISHED } from \"@process-creative/slate-theme-tools\";\nimport { Variant } from \"../tools/product/variant\";\n// import { bundle } from \"../objects/product/product-bundle\";\n// import { ValidateResponse } from \"../types/types\";\nimport { elemIsInView, getElem, getElems, onReady, onScroll } from \"../tools/utilities/helper-functions\";\nimport {initAccordion} from '../objects/accordion';\nimport { ValidationState } from \"../types/types\";\nimport { addBundleToCart, Bundle, getBundlePrice, validateBundleAvailability } from \"../objects/bundle/bundle-common\";\nimport { Cart } from \"../tools/cart/cart\";\n\ndeclare const window: Window & {\n  bundle: Bundle\n}\n\n//for accordion\nconst container = getElem('[data-product-template]')!;\nconst accordionContainer = getElem('[data-accordion-container]', container)!;\naccordionContainer && initAccordion(accordionContainer);\n\n\n\nconst SEL_TEMPLATE = '[data-product-template]';\nconst SEL_BTN_ADD = '[data-add-to-cart-button]';\nconst SEL_QTY = '[data-quantity-selector-field]';\n\nconst addToCartButton = getElem(SEL_BTN_ADD)!;\nconst productBundleElem = getElem('[data-product-bundle]')\nconst productIsBundle = !!productBundleElem\nconst trackBundleChildInventory = !!(productIsBundle && productBundleElem.dataset.trackChildInventory);\n\nlet bundle: Bundle\n\nlet selectedVariant: Variant;\nlet swatches: ProductSwatches;\n\nlet qtyVal: number = 1\n\n\nif(productIsBundle){\n  try{\n    bundle = setupBundle();\n    updateButton(validateBundleAvailability(bundle));\n  }catch(e){\n    console.error(e)\n    updateButton('error');\n  }\n} else {\n  swatches = swatchesFind({ container: getElem(SEL_TEMPLATE)! })!;\n  selectedVariant = swatches.variantSelector.variant;\n  updateButton(validateAvailability())\n}\n\nonAddClicked(() => {\n  addSelectedToCart();\n})\n\nif(!productIsBundle){\n  onVariantChanged(() => updateButton(validateAvailability()));\n}\n\nonQuantityChanged(qty => {\n  qtyVal = qty\n  if(productIsBundle){\n    updateButton(validateBundleAvailability(bundle));\n  } else {\n    updateButton(validateAvailability())\n  }\n});\n\n\nonCartUpdated(() => updateButton(validateAvailability()));\n\n\n\n/* Implementation */\n\nfunction disableButton(){\n  addToCartButton.classList.add(CLASS_DISABLED);\n  addToCartButton.setAttribute(ATTR_DISABLED, ATTR_DISABLED);\n}\n\nfunction enableButton(){\n  addToCartButton.classList.remove(CLASS_DISABLED);\n  addToCartButton.removeAttribute(ATTR_DISABLED);\n}\n\n\nfunction onVariantChanged(action: () => void){  \n  variantSelectorWatch({\n    variantSelector: swatches.variantSelector,\n    variantChange: ({ variant }) => {\n      let url = setQueryParams({ variant: variant.id || '' });\n      history.replaceState({ variant }, document.title, url);\n      selectedVariant = variant\n      action();\n    }\n  });\n}\n\nfunction onQuantityChanged(action: (qty: number) => void){\n  \n  getElem('quantity-selector')!\n  .addEventListener('qtyUpdated', (e: any) => {\n    const qtyVal = e.detail.quantity\n    action(qtyVal)\n  })\n}\n\n\nfunction onAddClicked(action: () => void){\n  addToCartButton.addEventListener('click', e => {\n    e.preventDefault();\n    action();\n  });\n}\n\nfunction onCartUpdated(action: () => void){\n  $(document).on(ON_CART_FINISHED, action);\n}\n\nfunction validateAvailability(): ValidationState{\n  const cartItems = (getCurrentCart() as Cart)?.items;\n\n  if(productIsBundle){\n    return validateBundleAvailability(bundle, qtyVal);\n  } else {\n    if(selectedVariant.available == false){\n      throw 'unavailable';\n    }    \n\n    const variantInventory = selectedVariant?.inventory_quantity;\n\n    if(variantInventory != undefined){\n      const variantInCartCount = cartItems.reduce((total: number, item) => {\n        return item.id == selectedVariant.id ? total + item.quantity : total;\n      }, 0)\n\n      const remainingInventory = variantInventory - variantInCartCount;\n\n      if(remainingInventory == 0){\n        return 'all in cart';\n      }\n\n      if(remainingInventory - qtyVal < 0){\n        return 'not enough inventory';\n      }\n    }\n\n    return 'ok';\n  }\n}\n\nfunction updateButton(response: ValidationState){\n  switch(response){\n    case 'ok': setValidButton(); break;\n    case 'error': setDisabled(); break;\n    case 'all in cart': \n    case 'not enough inventory': \n    case 'unavailable': \n      setSoldOutButton();\n  }\n  \n\n  function setValidButton(){\n    const {priceMoney, compareMoney} = (\n      productIsBundle ? getBundlePrice(bundle, qtyVal) : getVariantPrice()\n    );\n\n    const priceElem = getPriceElem(priceMoney, compareMoney);\n      \n    addToCartButton.innerHTML = `\n      ${t('products.product.add')}\n      <span class='is-divider'>|</span>\n      ${priceElem}\n    `;\n    enableButton();\n\n    function getVariantPrice(){\n      let { price, compare_at_price } = selectedVariant;\n      return {\n        compareMoney: compare_at_price && printMoney(compare_at_price),\n        priceMoney: printMoney(price)\n      };\n\n    }\n  }\n\n  function setSoldOutButton(){\n    disableButton();\n    addToCartButton.innerHTML = t('products.product.sold_out');\n  }\n\n\n  function setDisabled(){\n    disableButton();\n    addToCartButton.innerHTML = t('products.product.disabled');\n  }\n\n}\n\n\n\nasync function addSelectedToCart(){\n\n  disableButton();\n  addToCartButton.innerHTML = t('products.product.cart_pending');\n  const qty = Number(getElem<HTMLInputElement>(SEL_QTY)?.value);\n\n  if(productIsBundle && trackBundleChildInventory){\n    validateBundleAvailability(bundle, qty)\n    addBundleToCart({bundle, bundleQuantity: qty, addToCartButton});\n  } else {\n    try {\n      await addToCart(productIsBundle ? bundle.bundleProduct.variants[0].id : selectedVariant.id, qty);\n      addToCartButton.innerHTML = t('products.product.added_to_cart');\n    } catch(e: any){\n      alert(e.description);\n      addToCartButton.innerHTML = t('products.product.error');\n    }\n  }\n  const dispalyMessageDuration = 2000\n  await new Promise(resolve => setTimeout(resolve, dispalyMessageDuration));\n\n}\n\n\n\n\nfunction getPriceElem(priceMoney: string, compareMoney: string){\n  return `\n    <p\n      class=\"o-product-pricing c-product-details__add-cart-price\n      ${compareMoney ? 'has-compare' : ''}\"\n      data-product-pricing\n    >\n      ${compareMoney ? `\n        <span.\n          class=\"\n            o-product-pricing__money \n            o-product-pricing__compare \n            c-product-details__add-cart-price-money c-product-details__add-cart-price-compare\n          \"\n          data-currency\n          data-money=\"${compareMoney}\"\n          data-product-compare-money\n        >\n          ${compareMoney}\n        </span.>` : ''\n      }\n    \n      <span\n        class=\"o-product-pricing__money o-product-pricing__price\n        ${compareMoney ? 'has-compare' : ''}\"\n        data-currency\n        data-money=\"${priceMoney}\"\n        data-product-money\n      >\n        ${priceMoney}\n      </span>\n    </p>\n  `;\n}\n\n\nfunction setupBundle(): Bundle{\n  \n  return {\n    ...window.bundle,\n    percentageDiscount: Number(window.bundle.percentageDiscount)\n  }\n\n}\n","module.exports = jQuery;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.j = 6452;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t6452: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkSkinShark\"] = self[\"webpackChunkSkinShark\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\n__webpack_require__.O(undefined, [4736], () => (__webpack_require__(2964)))\nvar __webpack_exports__ = __webpack_require__.O(undefined, [4736], () => (__webpack_require__(5490)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","CLASS_SELECTED","CLASS_DISABLED","CLASS_SOLD_OUT","variantFirstAvailableOrDefault","p","variants","find","v","available","variantGetFromOptions","params","product","variant","variantDoesHaveOption","options","every","val","pos","handlize","SELECTOR_VARIANT_SELECTOR","EVENT_VARIANT","variantSelectorCreate","productString","selector","getAttribute","JSON","parse","value","id","variantSelector","addEventListener","e","variantId","parseInt","variantSelectorSetVariant","preventDefault","dispatchEvent","CustomEvent","detail","variantSelectorWatch","event","evt","variantChange","removeEventListener","SELECTOR_SWATCH_OBJ","SELECTOR_SWATCH_SELECT","ATTR_POSITION","ATTR_VALUE","STRING_SOLD_OUT","swatchesCreate","swatchContainer","swatches","groups","objects","selects","variantWatcher","changeParams","swatchesSetFromVariant","querySelectorAll","forEach","group","select","querySelector","positionOne","isNaN","position","push","obj","swatchSetOptionValue","selectedOptions","matchFound","i","length","indexValue","selectedTemp","firstMatchVariant","console","error","selectedValue","classList","add","remove","updateAvailableSwatches","optionElements","swatchObject","optionElem","setAttribute","option","text","includes","prevOption","allowedOptionsForThisLevel","n","indexOf","ao","aos","removeAttribute","avail","canUse","y","Object","entries","key","optionElement","replace","ATTR_DISABLED","getElem","container","handleError","elem","document","throwSelectorError","actions","window","_","action","randomNumber","digits","num","Math","pow","round","random","SELECTOR_SLIDE","EXPANDED_CLASS","disableButton","addToCartButton","addBundleToCart","data","setBundleProperties","bundleProductVariantId","bundleProduct","bundleId","childTitles","childVariants","reduce","variantGroups","existingVariant","g","quantity","map","name","join","bundleProductItem","Number","bundleQuantity","properties","isProductBundle","_bundleName","title","_percentageDiscount","percentageDiscount","toString","_childTitles","childVariantItems","isChildVariant","_uniqueChildId","bundle","innerHTML","t","items","cartAdd","Promise","resolve","setTimeout","validateVariantAvailability","groupQty","cartItems","getCurrentCart","inventory_quantity","inventory_policy","inventory_management","trackQuantityChecked","continueSellingWhenOutOfStockChecked","variantInCartCount","qty","item","variant_id","remainingInventory","validateBundleAvailability","groupedVariants","groupChildVariants","validationState","childVariant","existingGroup","getBundlePrice","bundleFixedPrice","price","totalVariantPrice","totalPrice","priceMoney","printMoney","compareMoney","formatMoney","getPriceAfterDiscount","getFormat","accordionContainer","slides","elems","Array","from","getElems","expandSlide","slide","expand","clickedSlide","contains","slideAlreadyOpened","closeOtherSlides","currentSlide","target","closest","initAccordion","selectedVariant","input","SEL_QTY","productBundleElem","productIsBundle","trackBundleChildInventory","dataset","trackChildInventory","qtyVal","updateButton","validateAvailability","variantInventory","undefined","total","response","getVariantPrice","priceElem","getPriceElem","compare_at_price","setValidButton","addToCart","alert","description","addSelectedToCart","url","setQueryParams","history","replaceState","onVariantChanged","onQuantityChanged","$","on","ON_CART_FINISHED","onCartUpdated","module","exports","jQuery","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","call","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","keys","splice","r","d","definition","o","defineProperty","enumerable","get","globalThis","this","Function","prop","prototype","hasOwnProperty","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","bind","__webpack_exports__"],"sourceRoot":""}